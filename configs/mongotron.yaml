# MongoTron Configuration for nileVM.lan Test Environment

server:
  host: 0.0.0.0
  port: 8080
  read_timeout: 30s
  write_timeout: 30s
  idle_timeout: 120s

database:
  mongodb:
    uri: mongodb://mongotron:MongoTron2025@nileVM.lan:27017/mongotron
    database: mongotron
    collections:
      addresses: addresses
      transactions: transactions
      events: events
      webhooks: webhooks

blockchain:
  tron:
    node:
      host: nileVM.lan
      port: 50051
      use_tls: false
    connection:
      timeout: 30s
      max_retries: 3
      backoff_interval: 5s
      keep_alive: 60s

worker_pool:
  workers: 1000
  queue_size: 100000
  job_timeout: 60s
  graceful_shutdown_timeout: 30s

logging:
  level: info
  format: json
  output: stdout

metrics:
  prometheus:
    enabled: true
    port: 9090
    path: /metrics

webhooks:
  delivery:
    timeout: 30s
    max_concurrent: 100
    retry_attempts: 3
  # Porto API Integration for USDT/TRC20 transfer monitoring
  porto:
    enabled: true  # Enable Porto API webhooks
    baseUrl: "${PORTO_API_URL:http://localhost:8000}"  # Porto API base URL
    webhookPath: "/v1/webhooks/mongotron/transfer"  # Webhook endpoint path
    webhookSecret: "${MONGOTRON_WEBHOOK_SECRET:default-secret-change-me}"  # HMAC secret for signing webhooks
    network: "tron-nile"  # "tron-mainnet" or "tron-nile"

api:
  version: v1
  base_path: /api/v1
  cors:
    enabled: true
    allowed_origins: ["*"]
    allowed_methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
    allowed_headers: ["*"]
  rate_limiting:
    enabled: true
    requests_per_minute: 100
    burst: 50

security:
  api_key_header: X-API-Key
  enable_api_keys: false
  jwt:
    enabled: false
    secret: change-me-in-production
    expiration: 24h
  tls:
    enabled: false
    cert_file: ""
    key_file: ""
